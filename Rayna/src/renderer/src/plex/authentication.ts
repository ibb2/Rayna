import Store from 'electron-store'
import { v4 as uuidv4 } from 'uuid'

class Authentication {
    plexProduct = 'pMusic' //TODO: Change this to Rayna product name
    plexClientId = ''
    plexUserAccessToken = ''
    plexPin = ''
    plexId = ''

    store = new Store()

    generateClientIdentifier(): string {
        // Generate a random string of any length to set as the Client Identifier, or return stored Client Identifier if it exists.
        let clientIdentifier = this.store.get('clientIdentifier')
        if (clientIdentifier) {
            return clientIdentifier
        }
        clientIdentifier = uuidv4()
        this.store.set('clientIdentifier', clientIdentifier)
        return clientIdentifier
    }

    generatePin() {
        var response = fetch('https://plex.tv/api/v2/pins?X-Plex-Product=' + this.plexProduct + '&X-Plex-Client-Identifier=' + this.generateClientIdentifier() + '&X-Plex-Device=' + navigator.userAgent + '&X-Plex-Device-Name=' + navigator.userAgent + '&X-Plex-Device-Model=' + navigator.userAgent + '&X-Plex-Device-Platform=' + navigator.userAgent + '&X-Plex-Device-Platform-Version=' + navigator.userAgent + '&X-Plex-Device-Vendor=' + navigator.userAgent + '&X-Plex-Device-Version=' + navigator.userAgent + '&X-Plex-Model=' + navigator.userAgent + '&X-Plex-Platform=' + navigator.userAgent + '&X-Plex-Platform-Version=' + navigator.userAgent + '&X-Plex-Vendor=' + navigator.userAgent + '&X-Plex-Version=' + navigator.userAgent + '&X-Plex-Username=' + navigator.userAgent + '&X-Plex-Device-Platform-Features=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-Plex-Device-Platform-Features-Version=' + navigator.userAgent + '&X-P
